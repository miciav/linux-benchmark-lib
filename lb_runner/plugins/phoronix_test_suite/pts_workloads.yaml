version: 1

pts:
  binary: phoronix-test-suite
  deb_path: "lb_runner/plugins/phoronix_test_suite/assets/phoronix-test-suite_10.8.4_all.deb"
  apt_packages:
    - gdebi-core
    - unzip
  # PTS stores its state under PTS_USER_PATH (e.g. ~/.phoronix-test-suite/).
  # We override it to a stable location inside the container/remote host.
  # NOTE: keep the trailing slash; PTS concatenates paths as strings.
  home_root: "/opt/lb/.phoronix-test-suite/"

workloads:
  - profile: build-linux-kernel
    expected_runtime_seconds: 7200
    description: "PTS: build Linux kernel"
    tags: ["pts", "compile", "cpu"]
    apt_packages:
      - apt-file
      - autoconf
      - bc
      - bison
      - build-essential
      - flex
      - git
      - libssl-dev
      - mesa-utils
      - vulkan-tools

  - profile: compress-7zip
    expected_runtime_seconds: 900
    description: "PTS: 7zip compression"
    tags: ["pts", "compression", "cpu"]
    apt_packages:
      - p7zip-full

  - profile: gmpbench
    expected_runtime_seconds: 300
    description: "PTS: GMPbench (The Great Computer Language Shootout)"
    tags: ["pts", "cpu", "math"]
    apt_packages:
      - build-essential
      - m4
