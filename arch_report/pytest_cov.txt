...E
==================================== ERRORS ====================================
______________ ERROR at setup of test_dfaas_multipass_end_to_end _______________

request = <SubRequest 'multipass_two_vms' for <Function test_dfaas_multipass_end_to_end>>

    @pytest.fixture(scope="module")
    def multipass_two_vms(request):
        """Fixture that uses existing dfaas VMs if available, otherwise creates new ones."""
        # First check if existing dfaas VMs are available
        existing_vms = _get_existing_dfaas_vms()
        if existing_vms:
            logger.info("Using existing dfaas VMs: %s", [vm["name"] for vm in existing_vms])
            yield existing_vms
            return
    
        # Fall back to creating new VMs
        logger.info("No existing dfaas VMs found, creating new ones...")
        monkeypatch = pytest.MonkeyPatch()
        if "LB_MULTIPASS_VM_COUNT" not in os.environ:
            monkeypatch.setenv("LB_MULTIPASS_VM_COUNT", "2")
        if "LB_MULTIPASS_MEMORY" not in os.environ:
            monkeypatch.setenv("LB_MULTIPASS_MEMORY", "4G")
        if "LB_MULTIPASS_CPUS" not in os.environ:
            monkeypatch.setenv("LB_MULTIPASS_CPUS", "2")
        try:
>           vms = request.getfixturevalue("multipass_vm")
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/e2e/test_dfaas_multipass_e2e.py:387: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
.venv/lib/python3.13/site-packages/_pytest/fixtures.py:539: in getfixturevalue
    fixturedef = self._get_active_fixturedef(argname)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/_pytest/fixtures.py:627: in _get_active_fixturedef
    fixturedef.execute(request=subrequest)
.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1110: in execute
    result: FixtureValue = ihook.pytest_fixture_setup(
.venv/lib/python3.13/site-packages/pluggy/_hooks.py:512: in __call__
    return self._hookexec(self.name, self._hookimpls.copy(), kwargs, firstresult)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/pluggy/_manager.py:120: in _hookexec
    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/_pytest/setuponly.py:36: in pytest_fixture_setup
    return (yield)
            ^^^^^
.venv/lib/python3.13/site-packages/_pytest/fixtures.py:1202: in pytest_fixture_setup
    result = call_fixture_func(fixturefunc, request, kwargs)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
.venv/lib/python3.13/site-packages/_pytest/fixtures.py:908: in call_fixture_func
    fixture_result = next(generator)
                     ^^^^^^^^^^^^^^^
tests/e2e/test_multipass_benchmark.py:227: in multipass_vm
    created_vms.append(_launch_vm(name, pub_key))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^
tests/e2e/test_multipass_benchmark.py:185: in _launch_vm
    ip_address = _wait_for_ip(vm_name)
                 ^^^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

vm_name = 'benchmark-test-vm-1'

    def _wait_for_ip(vm_name: str) -> str:
        for _ in range(10):
            info_proc = subprocess.run(
                ["multipass", "info", vm_name, "--format", "json"],
                capture_output=True,
                text=True,
            )
            if info_proc.returncode == 0:
                info = json.loads(info_proc.stdout)
                ipv4 = info["info"][vm_name]["ipv4"]
                if ipv4:
                    return ipv4[0]
            time.sleep(2)
>       pytest.fail(f"Could not retrieve VM IP address for {vm_name}.")
E       Failed: Could not retrieve VM IP address for benchmark-test-vm-1.

tests/e2e/test_multipass_benchmark.py:133: Failed
---------------------------- Captured stdout setup -----------------------------
Launching multipass VM: benchmark-test-vm-1...
[2K[0A[0E[2K[0A[0ECreating benchmark-test-vm-1  / [2K[0A[0E[2K[0A[0EConfiguring benchmark-test-vm-1  / [2K[0A[0E[2K[0A[0EStarting benchmark-test-vm-1  /-\|/-\|/-\|/-\|/-\|/-\|/-\|/-\|/-\|/-\|/-\|/-\|/-\|/- [2K[0A[0ELaunched: benchmark-test-vm-1
[2K[0A[0E


                        Test Statistics by Marker                         
â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”“
â”ƒ Marker    â”ƒ Total â”ƒ Passed â”ƒ Failed â”ƒ Skipped â”ƒ Duration (s) â”ƒ Avg (s) â”ƒ
â”¡â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”©
â”‚ inter_e2e â”‚     3 â”‚      3 â”‚      0 â”‚       0 â”‚         8.26 â”‚    2.75 â”‚
â”‚ slow      â”‚     3 â”‚      3 â”‚      0 â”‚       0 â”‚         8.26 â”‚    2.75 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
=========================== short test summary info ============================
ERROR tests/e2e/test_dfaas_multipass_e2e.py::test_dfaas_multipass_end_to_end
!!!!!!!!!!!!!!!!!!!!!!!!!! stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!
